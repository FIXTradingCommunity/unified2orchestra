### Message AllocationInstruction type J category Allocation (19)

The Allocation Instruction message provides the ability to specify how an order or set of orders should be subdivided amongst one or more accounts. In versions of FIX prior to version 4.4, this same message was known as the Allocation message. Note in versions of FIX prior to version 4.4, the allocation message was also used to communicate fee and expense details from the Sellside to the Buyside. This role has now been removed from the Allocation Instruction and is now performed by the new (to version 4.4) Allocation Report and Confirmation messages.,The Allocation Report message should be used for the Sell-side Initiated Allocation role as defined in previous versions of the protocol.

| Name                            | Tag       | Req'd | Documentation                                                                                                                               |
|---------------------------------|-----------|----------|-------------------------------------------------------------------------------------------------------------------------------|
| StandardHeader                  | component |   Y   | MsgType = J                                                                                                                               |
| AllocID                         | 70        |   Y   | Unique identifier for this allocation instruction message                                                                                                                               |
| AllocRequestID                  | 2758      |       | May be used to link to a previously submitted AllocationInstructionAlertRequest(35=DU) message.                                                                                                                               |
| AllocTransType                  | 71        |   Y   | i.e. New, Cancel, Replace                                                                                                                               |
| AllocType                       | 626       |   Y   | Specifies the purpose or type of Allocation message                                                                                                                               |
| SecondaryAllocID                | 793       |       | Optional second identifier for this allocation instruction (need not be unique)                                                                                                                               |
| RefAllocID                      | 72        |       | Required for AllocTransType = Replace or Cancel                                                                                                                               |
| AllocCancReplaceReason          | 796       |       | Required for AllocTransType = Replace or Cancel/P/Gives the reason for replacing or cancelling the allocation instruction                                                                                                                               |
| AllocIntermedReqType            | 808       |       | Required if AllocType = 8 (Request to Intermediary)/P/Indicates status that is requested to be transmitted to counterparty by the intermediary (i.e. clearing house)                                                                                                                               |
| AllocLinkID                     | 196       |       | Can be used to link two different Allocation messages (each with unique AllocID) together, i.e. for F/X "Netting" or "Swaps"                                                                                                                               |
| AllocLinkType                   | 197       |       | Can be used to link two different Allocation messages and identifies the type of link. Required if AllocLinkID is specified.                                                                                                                               |
| AllocGroupID                    | 1730      |       | Group identifier assigned by the clearinghouse                                                                                                                               |
| FirmGroupID                     | 1728      |       | Firm assigned entity identifier for the allocation                                                                                                                               |
| BookingRefID                    | 466       |       | Can be used with AllocType=" Ready-To-Book "                                                                                                                               |
| AllocNoOrdersType               | 857       |       | Indicates how the orders being booked and allocated by an AllocationInstruction or AllocationReport message are identified, e.g. by explicit definition in the OrdAllocGrp or ExecAllocGrp components, or not identified explicitly.                                                                                                                               |
| OrdAllocGrp                     | group     |       | Indicates number of orders to be combined for allocation. If order(s) were manually delivered set to 1 (one).Required when AllocNoOrdersType = 1                                                                                                                               |
| ExecAllocGrp                    | group     |       | Indicates number of individual execution or trade entries. Absence indicates that no individual execution or trade entries are included. Primarily used to support step-outs.                                                                                                                               |
| PreviouslyReported              | 570       |       |                                                                                                                                |
| ReversalIndicator               | 700       |       |                                                                                                                                |
| MatchType                       | 574       |       |                                                                                                                                |
| Side                            | 54        |   Y   |                                                                                                                                |
| Instrument                      | component |   Y   | Insert here the set of "Instrument" (symbology) fields defined in "Common Components of Application Messages"./P/For NDFs fixing date and time can be optionally specified using MaturityDate and MaturityTime.                                                                                                                               |
| InstrumentExtension             | component |       | Insert here the set of "InstrumentExtension" fields defined in "Common Components of Application Messages"                                                                                                                               |
| FinancingDetails                | component |       | Insert here the set of "FinancingDetails" fields defined in "Common Components of Application Messages"                                                                                                                               |
| UndInstrmtGrp                   | group     |       |                                                                                                                                |
| InstrmtLegGrp                   | group     |       |                                                                                                                                |
| Quantity                        | 53        |   Y   | Total quantity (e.g. number of shares) allocated to all accounts, or that is Ready-To-Book                                                                                                                               |
| QtyType                         | 854       |       |                                                                                                                                |
| LastMkt                         | 30        |       | Market of the executions.                                                                                                                               |
| TradeOriginationDate            | 229       |       |                                                                                                                                |
| TradingSessionID                | 336       |       |                                                                                                                                |
| TradingSessionSubID             | 625       |       |                                                                                                                                |
| PriceType                       | 423       |       |                                                                                                                                |
| PriceQualifierGrp               | group     |       |                                                                                                                                |
| AvgPx                           | 6         |       | For FX orders, should be the "all-in" rate (spot rate adjusted for forward points), expressed in terms of Currency(15)./P/For 3rd party allocations used to convey either basic price or averaged price/P/Optional for average price allocations in the listed derivatives markets where the central counterparty calculates and manages average price across an allocation group. |
| AvgParPx                        | 860       |       |                                                                                                                                |
| SpreadOrBenchmarkCurveData      | component |       | Insert here the set of "SpreadOrBenchmarkCurveData" fields defined in "Common Components of Application Messages"                                                                                                                               |
| Currency                        | 15        |       | Currency of AvgPx. Should be the currency of the local market or exchange where the trade was conducted.                                                                                                                               |
| AvgPxPrecision                  | 74        |       | Absence of this field indicates that default precision arranged by the broker/institution is to be used                                                                                                                               |
| OffshoreIndicator               | 2795      |       |                                                                                                                                |
| Parties                         | group     |       | Insert here the set of "Parties" (firm identification) fields defined in "Common Components of Application Messages"                                                                                                                               |
| TradeDate                       | 75        |   Y   |                                                                                                                                |
| TransactTime                    | 60        |       | Date/time when allocation is generated                                                                                                                               |
| SettlType                       | 63        |       |                                                                                                                                |
| SettlDate                       | 64        |       | Takes precedence over SettlType value and conditionally required/omitted for specific SettlType values./P/Required for NDFs to specify the "value date".                                                                                                                               |
| BookingType                     | 775       |       | Method for booking. Used to provide notification that this is to be booked out as an OTC derivative (e.g. CFD or similar). Absence of this field implies regular booking.                                                                                                                               |
| GrossTradeAmt                   | 381       |       | Expressed in same currency as AvgPx(6). (Quantity(53) * AvgPx(6) or AvgParPx(860)) or sum of (AllocQty(80) * AllocAvgPx(153) or AllocPrice(366)). For Fixed Income, AvgParPx(860) is used when AvgPx(6) is not expressed as "percent of par" price.                                                                                                                               |
| Concession                      | 238       |       |                                                                                                                                |
| TotalTakedown                   | 237       |       |                                                                                                                                |
| NetMoney                        | 118       |       | Expressed in same currency as AvgPx. Sum of AllocNetMoney./P/For FX, if specified, expressed in terms of Currency(15).                                                                                                                               |
| PositionEffect                  | 77        |       |                                                                                                                                |
| AutoAcceptIndicator             | 754       |       | Indicates if Allocation has been automatically accepted on behalf of the Take-up Firm by the Clearing House                                                                                                                               |
| Text                            | 58        |       |                                                                                                                                |
| EncodedTextLen                  | 354       |       | Must be set if EncodedText field is specified and must immediately precede it.                                                                                                                               |
| EncodedText                     | 355       |       | Encoded (non-ASCII characters) representation of the Text field in the encoded format specified via the MessageEncoding field.                                                                                                                               |
| NumDaysInterest                 | 157       |       | Applicable for Convertible Bonds and fixed income                                                                                                                               |
| AccruedInterestRate             | 158       |       | Applicable for Convertible Bonds and fixed income                                                                                                                               |
| AccruedInterestAmt              | 159       |       | Applicable for Convertible Bonds and fixed income                                                                                                                               |
| TotalAccruedInterestAmt         | 540       |       |                                                                                                                                |
| InterestAtMaturity              | 738       |       |                                                                                                                                |
| EndAccruedInterestAmt           | 920       |       | For repurchase agreements the accrued interest on termination.                                                                                                                               |
| StartCash                       | 921       |       | For repurchase agreements the start (dirty) cash consideration                                                                                                                               |
| EndCash                         | 922       |       | For repurchase agreements the end (dirty) cash consideration                                                                                                                               |
| LegalConfirm                    | 650       |       |                                                                                                                                |
| Stipulations                    | group     |       |                                                                                                                                |
| YieldData                       | component |       |                                                                                                                                |
| RegulatoryTradeIDGrp            | group     |       |                                                                                                                                |
| PositionAmountData              | group     |       | Insert here here the set of "Position Amount Data" fields defined in "Common Components of Application Messages"                                                                                                                               |
| TotNoAllocs                     | 892       |       | Indicates total number of allocation groups (used to support fragmentation). Must equal the sum of all NoAllocs values across all message fragments making up this allocation instruction./P/Only required where message has been fragmented.                                                                                                                               |
| LastFragment                    | 893       |       | Indicates whether this is the last fragment in a sequence of message fragments. Only required where message has been fragmented.                                                                                                                               |
| AllocGrp                        | group     |       | Conditionally required except when AllocTransType = Cancel, or when AllocType = "Ready-to-book" or "Warehouse instruction"                                                                                                                               |
| AvgPxIndicator                  | 819       |       | Indicates if an allocation is to be average priced. Is also used to indicate if average price allocation group is complete or incomplete.                                                                                                                               |
| AvgPxGroupID                    | 1731      |       | Firm designated group identifier for average pricing                                                                                                                               |
| ClearingBusinessDate            | 715       |       | Indicates Clearing Business Date for which transaction will be settled.                                                                                                                               |
| TrdType                         | 828       |       | Indicates Trade Type of Allocation.                                                                                                                               |
| TrdSubType                      | 829       |       | Indicates TradeSubType of Allocation. Necessary for defining groups.                                                                                                                               |
| SecondaryTrdType                | 855       |       |                                                                                                                                |
| TradeContinuation               | 1937      |       |                                                                                                                                |
| TradeContinuationText           | 2374      |       |                                                                                                                                |
| EncodedTradeContinuationTextLen | 2372      |       | Must be set if EncodedTradeContinuationText(2371) field is specified and must immediately precede it.                                                                                                                               |
| EncodedTradeContinuationText    | 2371      |       | Encoded (non-ASCII characters) representation of the TradeContinuationText(2374) field in the encoded format specified via the MessageEncoding(347) field.                                                                                                                               |
| CustOrderCapacity               | 582       |       | Indicates CTI of original trade marked for allocation.                                                                                                                               |
| TradeInputSource                | 578       |       | Indicates input source of original trade marked for allocation.                                                                                                                               |
| MultiLegReportingType           | 442       |       | Indicates MultiLegReportType of original trade marked for allocation.                                                                                                                               |
| MessageEventSource              | 1011      |       | Used to identify the event or source which gave rise to a message.                                                                                                                               |
| RndPx                           | 991       |       | Specifies the rounded price to quoted precision.                                                                                                                               |
| RateSource                      | group     |       |                                                                                                                                |
| VenueType                       | 1430      |       | Used to identify on what kind of venue the trade originated when communicating with a party that may not have access to all trade details, e.g. a clearing organization.                                                                                                                               |
| RefRiskLimitCheckID             | 2334      |       | Conditionally required when RefRiskLimitCheckIDType(2335) is specified.                                                                                                                               |
| RefRiskLimitCheckIDType         | 2335      |       | Conditionally required when RefRiskLimitCheckID(2334) is specified.                                                                                                                               |
| RiskLimitCheckStatus            | 2343      |       |                                                                                                                                |
| StandardTrailer                 | component |   Y   |                                                                                                                                |

